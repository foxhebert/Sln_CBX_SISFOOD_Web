@{
    ViewBag.Title = "Asignar Horario";
}

<!--==============================================================================
          ENCABEZADO DE LA VENTANA DE GESTION DE VACACIONES
==================================================================================-->
<div class="row">
    <!--INICIO PANEL-->
    <div class="col-lg-7 col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel">
            <div class="col-lg-6 col-md-5 col-sm-5 col-xs-12">
                <label class="" style="text-align: right !important;">Buscar </label>
                <input type="text" id="filtroAsigHorCom" class="form-control" placeholder="Buscar por Código o N° Documento, Nombres o Apellidos">
            </div>

            <div class="col-lg-4 col-md-3 col-sm-3 col-xs-12">
                <label class="control-label">Und. Organizacional</label>
                <select class="form-control" id="IntIDEmp">
                    <option value="0" selected>Todos</option>
                </select>
            </div>

            <div class="col-lg-2 col-md-3 col-sm-3 col-xs-12">
                <label class="control-label">Estado</label>
                <select class="form-control" id="filtroActivo">
                    <option value="2">Todos</option>
                    <option value="1" selected>Activo</option>
                    <option value="0">Inactivo</option>
                </select>
            </div>
        </div>
    </div>
    <div class="col-lg-5 col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel">
            <div class="col-lg-5 col-md-3 col-sm-3 col-xs-12">
                <label class="control-label" style="width:100%">Filtro de Fechas del Listado de Horarios</label>
                <div id="filtroFechaAsigHorario" class="form-control range-datepicker AusentFec" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc">
                    <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                    <span>January 01, 2019 - January 28, 2019</span> <b class="caret"></b>
                </div>
            </div>

        </div>
    </div>
</div>
<!-- PANEL DE MENUS -->
<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="breadcrumb">
            <a class="breadcrumb__step breadcrumb__step--active" href="#">Personal</a>
            <a class="breadcrumb__step" href="#" style="width: 90%;">Asignar Horario</a>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-7 col-md-7 col-sm-12 col-xs-12">
        <div class="x_panel">
            <div class="x_title">
                <h2>Listado de Empleados</h2>

                <ul class="nav navbar-right panel_toolbox">
                    <li>
                        <input type="button" id="btn-new-AsighorarioCom" class="btn btn-primary" value="Asignar Horario" title="Seleccione el/los empleado(s) para Asignar Horario" disabled>
                    </li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div style="text-align: right;font-weight: bold;font-size: medium;">
                Seleccione al menos un Empleado antes de Asignar Horarios.
            </div>
            <br />
            <div class="clearfix"></div>
            <div class="x_content">
                <table id="datatable-AsighorarioCom" class="table table-striped table-bordered table-responsive pre-wrap" cellspacing="0" style="width:100%;">
                    @*<table id="datatable-AsighorarioCom" class="table table-striped table-bordered table-responsive pre-wrap " cellspacing="0" width="100%">*@

                    <thead>
                        <tr>
                            <th><input type="checkbox" class="icheckbox_flat-blue" id="All_Horarios" /></th>
                            <th>Código</th>
                            <th>Apellidos y Nombres</th>
                            <th>N° Documento</th>
                            <th>Fecha Admisión</th>
                            <th>Und. Organizacional</th>
                            <th>Estado</th>
                            <th>Acción</th>
                            <th style="display:none">Id</th>
                        </tr>
                    </thead>
                    <tbody id="datatable-AsighorarioComB"></tbody>
                </table>
            </div>
        </div>
    </div>

    <input type="hidden" id="TotalPag" />
    <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
        <div class="form-hide-AsighorarioCom" hidden>
            <div class="x_panel">
                <div id="VerHist" hidden>
                    <div class="x_title">
                        <h2>Listado de Horarios Asignados</h2>
                        <ul class="nav navbar-right panel_toolbox">

                            <li>
                                <input type="button" id="btn-cancelHistorial" class="btn btn-dark" value="Cerrar">
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                        <div class="row">
                            <div id="NombresG" class="col-lg-8 col-md-5 col-sm-12 col-xs-12">
                            </div>
                            <div class="form-group pull-right" id="11" disabled>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <table id="TablaHistoricoHor" class="table table-striped table-bordered table-responsive pre-wrap" cellspacing="0" style="width:100%;">
                                    @*<table id="TablaHistoricoHor" class="table table-striped table-bordered table-responsive pre-wrap " cellspacing="0" width="100%">*@
                                    <thead>
                                        <tr>

                                            <th>Fecha Asignación</th>
                                            <th>Horario</th>
                                            <th>Código Horario</th>
                                            <th>Acción</th>
                                            <th style="display:none"></th>
                                            <th style="display:none"></th>

                                        </tr>
                                    </thead>
                                    <tbody id="TablaHistoricoHorB"></tbody>

                                </table>
                            </div>
                            <button id="mi_boton" onclick="sortByDate()" hidden>Ordenar por fecha</button>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-lg-12 col-md-5 col-sm-12 col-xs-12" style="font-size: 13px;color: #337ab7;font-style: italic;">
                                [Los Horarios Fijos no son eliminables | Un Empleado Inactivo no puede Editar o Eliminar sus Horarios].
                            </div>
                        </div>
                    </div>
                </div>

                <div id="AsigHor" hidden>
                    <div class="x_title">
                        <h2>Asignación de Horario</h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li>
                                <input type="button" id="btn-save-change-AsighorarioCom" class="btn btn-primary" value="Guardar">
                                <input type="button" id="btn-update-AsighorarioCom" class="btn btn-success" value="Actualizar" hidden>
                            </li>
                            <li>
                                <input type="button" id="btn-cancel-AsighorarioCom" class="btn btn-dark" value="Cancelar">
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>

                    <div class="x_content">

                        <form class="form-horizontal form-label-left">

                            <div class="row">
                                <div class="col-md-6 col-sm-6 col-xs-6">
                                    <div class="form-group">
                                        <label>Horario (*)</label>
                                        <select class="form-control" id="IdHorCom"></select>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-6">
                                    <div class="form-group">
                                        <label>Fecha Inicio (*)</label>
                                        <div class="control-group">
                                            <div class="col-md-6 col-sm-6 col-xs-12 form-group" style="width: 100%;padding-left: 0px;padding-right: 0px;">
                                                <span class="fa fa-calendar form-control-feedback left" aria-hidden="true"></span>
                                                <input type="date" class="form-control has-feedback-left" id="fechaAsig_" style="padding-left: 70px;border: 1px solid #ccc;" max="9999-12-31" value="">
                                            </div>
                                        </div>
                                        <style>
                                            .badge-light-label {
                                                color: #212529;
                                                background-color: #F8F9FA;
                                            }

                                            .daterangepicker td.active, .daterangepicker td.active:hover {
                                                background-color: #536A7F !important;
                                                color: #fff !important;
                                            }
                                        </style>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <div class="row">
                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                            <h3 class="x_title">Lista de Empleados</h3>
                                        </div>
                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                            <table id="TablaListEmp" class="table table-striped table-bordered table-responsive pre-wrap" cellspacing="0" style="width:100%;">
                                                @*<table id="TablaListEmp" class="table table-striped table-bordered table-responsive pre-wrap " cellspacing="0" width="100%">*@
                                                <thead>
                                                    <tr>

                                                        <th>Código</th>
                                                        <th>Apellidos y Nombres</th>
                                                        <th>Doc. Identidad</th>
                                                        <th>Und. Organizacional</th>
                                                        <th>Acción</th>

                                                        <th style="display:none">Acción</th>

                                                    </tr>
                                                </thead>
                                                <tbody id="TablaListEmpB"></tbody>

                                            </table>
                                        </div>



                                    </div>

                                </div>



                            </div>
                            <script>


                                $(document).ready(function () {

                                    CombosAsigHorario();
                                    if ($("#datatable-AsighorarioCom").length) {
                                        traerDatosAsigHorario();
                                    }
                                });

                            </script>
                        </form>
                    </div>

                </div>

                <div id="EditHorAsig" hidden>
                    <div class="x_title">
                        <h2>Asignación de Horario</h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li>
                                <input type="button" id="btn-EditHistorial_Edit" onclick="ActualizarAsigDetHor()" class="btn btn-success" value="Actualizar">
                            </li>
                            <li>
                                <input type="button" id="btn-cancelHistorial_Edit" class="btn btn-dark" value="Cancelar">
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">

                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">

                                <h1 id="NomEmpEdit"></h1>
                                <input type="hidden" id="IntIdPe" />
                            </div>

                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-6 col-sm-6 col-xs-6">
                                <div class="form-group">
                                    <label>Horario (*)</label>
                                    <select class="form-control" id="IdHorComEdit"></select>
                                </div>
                            </div>
                            <div class="col-md-6 col-sm-6 col-xs-6">
                                <div class="form-group">
                                    <label>Fecha Inicio (*)</label>
                                    <div class="control-group">
                                        <div class="col-md-6 col-sm-6 col-xs-12 form-group" style="width: 100%;padding-left: 0px;padding-right: 0px;">
                                            <span class="fa fa-calendar form-control-feedback left" aria-hidden="true"></span>
                                            <input type="date" class="form-control has-feedback-left" id="fechaAsigEdit_" style="padding-left: 70px;border: 1px solid #ccc;" max="9999-12-31" value="">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">

                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade bs-example-modal-lg" id="modaldetalle" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <div class="row">
                    <div class="col-md-8">
                        <h4 class="modal-title" id="myModalLabel">Asignaciones Observadas </h4>
                    </div>
                    <div class="col-md-4 text-right">
                        <button class="btn btn-success" id="btnEmpContinuar">Continuar</button>
                        <button class="btn btn-dark" data-dismiss="modal" id="btnEmpCerrar">Cerrar</button>
                    </div>
                </div>

            </div>
            <div class="modal-body mb-4 pb-4 min-height-350">
                <div>
                    <h4>
                        De los <b><span id="totalEmpleados">X</span></b> Empleados seleccionados, <b><span id="totalEmpleadosObs">X</span></b> <span id="textoModal"></span>
                    </h4>
                </div>
                <br />
                <table id="TablaListEmpObserv" class="table table-striped table-bordered table-responsive pre-wrap" cellspacing="0" style="width:100%;">
                    @*<table id="TablaListEmpObserv" class="table table-striped table-bordered table-responsive " cellspacing="0" width="100%">*@
                    <thead>
                        <tr>
                            <th>Código</th>
                            <th>Apellidos y Nombres</th>
                            <th>Observación</th>
                        </tr>
                    </thead>
                    <tbody id="TablaListEmpObservB"></tbody>

                </table>
                <div>
                    <br><br><br>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="~/Scripts/util/AsigHorario.js"></script>
